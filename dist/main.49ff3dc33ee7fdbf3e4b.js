!function(){"use strict";const t="interference",e="gentle",n="mandala",o="vectorfield",a="shellridge",i={wavelength:25,speed:.018,threshold:.12,gradientMode:!0,sourceCount:9,lineDensity:35,mandalaComplexity:6,mandalaSpeed:1,tileSize:55,tileShiftAmplitude:10,shellRidgeRings:25,shellRidgeDistortion:8,strokeEnabled:!1,strokeWidth:3,strokeColor:"#000000",colors:{color1:"#2C3E50",color2:"#5DADE2",color3:"#F8F9FA",color4:"#E8F4FD"}},r=400,s=150,l=.4,c=.5,h={dawn:{color1:"#FFE4E1",color2:"#FFB6C1",color3:"#FFA07A",color4:"#FF7F50"},ocean:{color1:"#000080",color2:"#0066CC",color3:"#0099FF",color4:"#00CCFF"},forest:{color1:"#228B22",color2:"#32CD32",color3:"#90EE90",color4:"#98FB98"},sunset:{color1:"#FF4500",color2:"#FF6347",color3:"#FFD700",color4:"#FFFF00"},midnight:{color1:"#191970",color2:"#483D8B",color3:"#6A5ACD",color4:"#9370DB"}},p=334,d=145,m="M172.607 2.60026L183.503 13.4805L183.508 20.1911L192.163 20.1855C196.808 20.1824 201.983 21.3632 206.173 24.9826C211.041 21.0891 216.998 18.779 223.606 18.7745C227.424 18.7719 231.493 19.5167 235.162 21.2563L236.275 20.142L244.915 20.1356L244.911 13.4405L255.791 2.54516L272.278 2.53343L283.174 13.4146L283.178 20.2112C283.905 20.1514 284.626 20.123 285.333 20.1225L311.638 20.1055C316.527 20.1022 322.004 21.4088 326.302 25.4916C330.687 29.6581 332.261 35.2062 332.264 40.4261L332.29 77.2901L330.066 79.5158L332.573 82.0198L332.582 95.6364L321.701 106.531L319.881 106.533L319.895 128.34L309.015 139.236L292.528 139.247L287.638 134.363C281.591 138.368 274.117 140.648 266.151 140.653C258.27 140.659 251.024 138.534 245.082 134.505L239.955 139.64L222.754 139.652L217.225 134.131L211.705 139.659L194.504 139.671L188.975 134.15L183.454 139.678L165.541 139.69L160.013 134.169L154.492 139.697L137.29 139.709L131.762 134.188L126.242 139.717L109.04 139.728L106.564 137.255C103.345 138.807 99.8781 139.377 96.6637 139.379L70.3583 139.396C65.9837 139.399 61.1383 138.353 57.0885 135.207C51.1066 139.241 43.6547 140.988 35.9212 140.993C27.3443 140.999 19.4329 138.797 13.2507 134.163C6.95005 129.439 3.03683 122.594 2.1989 114.798L6.95368 109.501C4.57494 105.743 3.33229 101.302 3.329 96.4125C3.32458 89.631 6.0088 83.5797 10.5125 79.0099C4.42753 72.7207 0.740988 63.975 0.734209 53.9952C0.720631 33.7085 15.7615 18.6732 35.242 18.6599C43.0825 18.6547 50.2334 21.0894 55.9763 25.3309C60.2101 21.5101 65.5147 20.2696 70.2648 20.2664L96.5692 20.2483C101.369 20.2451 106.735 21.5055 110.995 25.4143C116.654 21.1947 123.707 18.7499 131.485 18.7447C136.507 18.7413 141.132 19.7312 145.245 21.5131L145.24 13.5064L156.12 2.61101L172.607 2.60026ZM230.488 53.9261C230.489 53.958 230.485 53.9901 230.485 54.0218C230.499 54.0008 230.515 53.9813 230.528 53.9616C230.515 53.9426 230.5 53.9239 230.486 53.9036C230.486 53.9111 230.488 53.9186 230.488 53.9261Z",g="M35.4171 80.6458C48.3842 80.6371 55.6136 86.9299 57.2872 96.2835L42.2824 96.2943C41.447 93.7014 39.3151 92.2203 35.4249 92.223C31.9055 92.2254 30.0538 93.5236 30.0548 95.1907C30.0561 97.0432 31.5386 97.5983 36.2628 98.2435L40.5236 98.7962C49.9719 99.9939 57.6623 103.879 57.6691 113.697C57.6757 123.607 49.2517 130.097 35.9142 130.106C22.3912 130.115 14.0498 123.174 13.0245 113.634L28.215 113.624C29.3286 116.773 32.2008 118.067 35.9982 118.065C39.6105 118.062 41.7407 116.949 41.7394 115.004C41.7376 112.596 38.6803 112.043 34.6046 111.49L30.4357 110.937C20.8022 109.647 14.223 105.39 14.2169 96.4056C14.211 87.5138 22.3574 80.6547 35.4171 80.6458ZM266.664 80.5823C281.669 80.5723 291.032 91.5889 291.041 105.853C291.042 106.501 291.042 106.964 290.858 108.538L256.864 108.562C258.073 114.767 262.335 116.709 266.503 116.706C270.764 116.703 273.171 115.126 274.189 112.995L290.583 112.985C288.274 122.341 278.738 129.757 266.142 129.766C250.859 129.776 241.033 119.223 241.024 105.052C241.015 91.344 250.918 80.5929 266.664 80.5823ZM229.834 81.7318C232.95 81.7297 235.483 82.5553 237.237 84.222C238.995 85.8916 239.921 88.3585 239.923 91.5306L239.948 128.751L222.747 128.763L222.727 98.5814C222.726 97.6421 222.544 97.0353 222.195 96.6595C221.852 96.2901 221.275 96.068 220.303 96.0687L211.677 96.0745L211.698 128.771L194.497 128.783L194.475 96.0862L185.848 96.0921C184.875 96.0928 184.299 96.3149 183.956 96.6849C183.608 97.0612 183.427 97.6683 183.428 98.6077L183.447 128.789L165.534 128.801L165.514 98.6194C165.513 97.68 165.331 97.0733 164.983 96.6976C164.639 96.3281 164.063 96.1062 163.091 96.1068L154.463 96.1126L154.485 128.809L137.283 128.821L137.262 96.1243L128.634 96.1302C127.662 96.131 127.086 96.3531 126.743 96.723C126.395 97.0992 126.214 97.7064 126.215 98.6458L126.235 128.828L109.034 128.839L109.009 91.6185C109.007 88.4466 109.93 85.9789 111.685 84.3069C113.437 82.6379 115.968 81.8092 119.084 81.8069L172.621 81.7708C174.749 81.7694 176.474 81.7574 177.864 81.7669L229.834 81.7318ZM106.376 119.036C106.38 125.242 102.77 128.486 96.6574 128.491L70.3527 128.508C64.2395 128.512 60.6244 125.272 60.6202 119.067L60.5958 82.2034L77.0822 82.1917L77.1027 112.017C77.104 113.962 77.8456 114.887 79.8829 114.886L87.1076 114.881C89.1452 114.88 89.8862 113.953 89.8849 112.008L89.8644 82.1829L106.352 82.1722L106.376 119.036ZM321.693 95.6429L311.763 95.6497C309.725 95.6511 308.985 96.5779 308.986 98.5228L309.006 128.348L292.52 128.359L292.494 91.4944C292.49 85.2889 296.101 82.0445 302.214 82.0403L321.684 82.0276L321.693 95.6429ZM266.395 92.9017C262.134 92.9045 258.338 95.2227 257.23 99.6693L275.291 99.6575C274.269 95.1197 270.748 92.8988 266.395 92.9017ZM113.713 83.305C113.698 83.3127 113.684 83.3216 113.669 83.3294C113.709 83.3084 113.75 83.2883 113.79 83.2679C113.765 83.2807 113.738 83.2919 113.713 83.305ZM114.986 82.7708C114.972 82.7757 114.957 82.7815 114.943 82.7864C114.98 82.7736 115.019 82.7608 115.057 82.7484C115.033 82.756 115.01 82.763 114.986 82.7708ZM116.912 82.3167C116.877 82.322 116.841 82.3287 116.806 82.3343C116.865 82.3251 116.924 82.3154 116.984 82.3069L116.912 82.3167ZM172.621 82.1273L119.085 82.1634V82.1644L172.621 82.1282C173.965 82.1273 175.146 82.1239 176.181 82.1224C175.146 82.1234 173.965 82.1264 172.621 82.1273ZM177.813 82.1243C177.856 82.1246 177.9 82.125 177.943 82.1253L229.835 82.0901C230.026 82.09 230.215 82.0927 230.401 82.0989L229.835 82.0892L177.813 82.1243ZM35.2492 29.5482C48.5755 29.5392 58.9853 39.54 58.9952 53.9554C59.0049 68.2791 48.6087 78.3867 35.2824 78.3958C21.9559 78.4048 11.6318 68.3114 11.6222 53.9876C11.6125 39.572 21.9228 29.5572 35.2492 29.5482ZM131.489 29.6321C143.71 29.6239 152.433 38.0397 154.15 49.5726L139.109 49.5823C137.996 46.4709 135.431 44.3671 131.671 44.3694C126.971 44.3726 123.384 48.2198 123.388 53.9866C123.392 59.6621 126.898 63.5963 131.684 63.5931C135.358 63.5905 138.092 61.3917 139.2 58.2786L154.411 58.2689C152.881 69.6206 143.999 78.323 131.523 78.3314C118.362 78.3402 108.101 68.4606 108.091 53.9974C108.081 39.7173 118.329 29.6412 131.489 29.6321ZM223.614 29.6624C228.431 29.6592 232.358 31.3989 234.322 34.2405L236.284 34.2396L236.282 31.0296L252.161 31.0189L252.192 76.8743L236.492 76.8851L236.489 72.7581L234.526 72.7591C232.299 76.3372 228.197 78.2662 222.845 78.2698C212.051 78.2771 203.838 69.0198 203.828 54.4378C203.818 39.5808 213.534 29.6694 223.614 29.6624ZM96.5773 31.136C102.69 31.1321 106.305 34.3718 106.309 40.5775L106.333 77.4417L89.8468 77.4525L89.8263 47.6273C89.8249 45.6825 89.0835 44.7568 87.046 44.7581L79.8214 44.763C77.7838 44.7644 77.0428 45.6911 77.0441 47.636L77.0646 77.4612L60.5773 77.472L60.5529 40.6077C60.5488 34.4022 64.1587 31.1578 70.2716 31.1536L96.5773 31.136ZM172.629 31.0862L192.172 31.0726C198.285 31.0685 201.899 34.3083 201.903 40.514L201.929 77.3782L185.442 77.389L185.422 47.5648C185.421 45.6197 184.678 44.6933 182.641 44.6946L172.638 44.7015L172.659 77.3978L156.173 77.4085L156.13 13.4993L172.616 13.4876L172.629 31.0862ZM272.328 77.3304L255.842 77.3411L255.811 31.0296L272.298 31.0189L272.328 77.3304ZM311.646 30.9935C317.759 30.9895 321.373 34.2292 321.377 40.4349L321.401 77.2991L304.915 77.3099L304.895 47.4847C304.893 45.54 304.152 44.6142 302.114 44.6155L294.89 44.6204C292.852 44.6218 292.111 45.5486 292.112 47.4935L292.133 77.3187L275.646 77.3294L275.621 40.4651C275.617 34.2597 279.227 31.0153 285.34 31.011L311.646 30.9935ZM35.2589 44.3304C30.5303 44.3337 27.0079 48.1015 27.0118 53.9778C27.0159 59.7622 30.544 63.6158 35.2726 63.6126C40.0011 63.6092 43.6095 59.7506 43.6056 53.9661C43.6016 48.0897 39.9876 44.3272 35.2589 44.3304ZM228.353 44.3333C223.268 44.3367 219.791 48.2822 219.795 53.9681C219.799 59.6541 223.281 63.5955 228.365 63.5921C233.539 63.5886 236.748 59.2764 236.744 53.9573C236.741 48.6382 233.526 44.33 228.353 44.3333ZM272.295 26.7581L255.808 26.7689L255.799 13.431L272.285 13.4202L272.295 26.7581Z";class u{constructor(e){this.app=e,this.element=null,this.currentPattern=t,this.controls={},this.initializeUI(),this.bindEvents()}initializeUI(){this.element=document.createElement("div"),this.element.className="pattern-controls",this.createPatternSelector(),this.createParameterControls(),this.applyStyles(),this.updateControlsVisibility()}createPatternSelector(){const i=document.createElement("div");i.className="pattern-selector";[{type:t,label:"Interference",emoji:"ðŸŒŠ"},{type:e,label:"Gentle",emoji:"ðŸŒ¸"},{type:n,label:"Mandala",emoji:"ðŸ”®"},{type:o,label:"Vector Field",emoji:"ðŸŒ€"},{type:a,label:"Shell Ridge",emoji:"ðŸš"}].forEach(t=>{const e=document.createElement("button");e.className="pattern-button",e.innerHTML=`${t.emoji} ${t.label}`,e.dataset.pattern=t.type,e.title=`Switch to ${t.label} pattern`,t.type===this.currentPattern&&e.classList.add("active"),e.addEventListener("click",()=>{this.selectPattern(t.type)}),i.appendChild(e)}),this.element.appendChild(i)}createParameterControls(){const i=document.createElement("div");i.className="parameter-controls";[{key:"wavelength",label:"Wavelength",type:"range",min:10,max:100,step:1,patterns:[t,e,a]},{key:"speed",label:"Animation Speed",type:"range",min:.001,max:.1,step:.001,patterns:[t,e,n,o,a]},{key:"threshold",label:"Threshold",type:"range",min:.01,max:.5,step:.01,patterns:[t,e]},{key:"gradientMode",label:"Gradient Mode",type:"checkbox",patterns:[t,e,a]},{key:"sourceCount",label:"Wave Sources",type:"range",min:1,max:20,step:1,patterns:[t]},{key:"lineDensity",label:"Line Density",type:"range",min:10,max:100,step:1,patterns:[e]},{key:"mandalaComplexity",label:"Complexity",type:"range",min:2,max:20,step:1,patterns:[n]},{key:"mandalaSpeed",label:"Rotation Speed",type:"range",min:.1,max:5,step:.1,patterns:[n]},{key:"tileSize",label:"Tile Size",type:"range",min:20,max:200,step:5,patterns:[o]},{key:"tileShiftAmplitude",label:"Tile Shift",type:"range",min:0,max:50,step:1,patterns:[o]},{key:"shellRidgeRings",label:"Ridge Rings",type:"range",min:5,max:50,step:1,patterns:[a]},{key:"shellRidgeDistortion",label:"Distortion",type:"range",min:1,max:20,step:1,patterns:[a]}].forEach(t=>{const e=this.createControl(t);i.appendChild(e),this.controls[t.key]={element:e,definition:t,input:e.querySelector("input"),valueDisplay:e.querySelector(".value-display")}}),this.element.appendChild(i)}createControl(t){const e=document.createElement("div");e.className="parameter-control",e.dataset.parameter=t.key;const n=document.createElement("label");n.className="control-label",n.textContent=t.label;const o=document.createElement("div");let a,r;return o.className="input-container","range"===t.type?(a=document.createElement("input"),a.type="range",a.min=t.min,a.max=t.max,a.step=t.step,a.value=i[t.key]||t.min,a.className="range-input",r=document.createElement("span"),r.className="value-display",r.textContent=a.value,a.addEventListener("input",e=>{const n=parseFloat(e.target.value);r.textContent=n,this.updateParameter(t.key,n)}),o.appendChild(a),o.appendChild(r)):"checkbox"===t.type&&(a=document.createElement("input"),a.type="checkbox",a.checked=i[t.key]||!1,a.className="checkbox-input",a.addEventListener("change",e=>{this.updateParameter(t.key,e.target.checked)}),o.appendChild(a)),e.appendChild(n),e.appendChild(o),e}applyStyles(){const t=document.createElement("style");t.textContent="\n            .pattern-controls {\n                color: #1d1d1f;\n            }\n            \n            /* Pattern Selector */\n            .pattern-selector {\n                display: flex;\n                flex-direction: column;\n                gap: 8px;\n                margin-bottom: 24px;\n            }\n            \n            .pattern-button {\n                padding: 12px 16px;\n                background: rgba(0, 0, 0, 0.03);\n                border: 1px solid rgba(0, 0, 0, 0.08);\n                border-radius: 8px;\n                color: #1d1d1f;\n                cursor: pointer;\n                transition: all 0.2s ease;\n                font-size: 15px;\n                font-weight: 500;\n                text-align: left;\n                backdrop-filter: blur(10px);\n                -webkit-backdrop-filter: blur(10px);\n            }\n            \n            .pattern-button:hover {\n                background: rgba(0, 0, 0, 0.05);\n                border-color: rgba(0, 0, 0, 0.12);\n                transform: translateY(-1px);\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n            }\n            \n            .pattern-button.active {\n                background: rgba(0, 122, 255, 0.1);\n                border-color: rgba(0, 122, 255, 0.3);\n                color: #007aff;\n                box-shadow: 0 2px 12px rgba(0, 122, 255, 0.2);\n            }\n            \n            /* Parameter Controls */\n            .parameter-controls {\n                display: flex;\n                flex-direction: column;\n                gap: 16px;\n            }\n            \n            .parameter-control {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 12px 0;\n                border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n                transition: opacity 0.3s ease;\n            }\n            \n            .parameter-control.hidden {\n                display: none;\n            }\n            \n            .control-label {\n                font-size: 15px;\n                font-weight: 500;\n                color: #1d1d1f;\n                min-width: 100px;\n                margin-right: 16px;\n            }\n            \n            .input-container {\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                flex: 1;\n                justify-content: flex-end;\n            }\n            \n            /* Range Input */\n            .range-input {\n                width: 120px;\n                height: 4px;\n                background: rgba(0, 0, 0, 0.1);\n                border-radius: 2px;\n                outline: none;\n                appearance: none;\n                cursor: pointer;\n            }\n            \n            .range-input::-webkit-slider-thumb {\n                appearance: none;\n                width: 20px;\n                height: 20px;\n                background: white;\n                border: 2px solid #007aff;\n                border-radius: 50%;\n                cursor: pointer;\n                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n                transition: all 0.2s ease;\n            }\n            \n            .range-input::-webkit-slider-thumb:hover {\n                transform: scale(1.1);\n                box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);\n            }\n            \n            .range-input::-moz-range-thumb {\n                width: 20px;\n                height: 20px;\n                background: white;\n                border: 2px solid #007aff;\n                border-radius: 50%;\n                cursor: pointer;\n                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n            }\n            \n            .value-display {\n                font-size: 13px;\n                color: #86868b;\n                min-width: 40px;\n                text-align: right;\n                font-family: -apple-system, BlinkMacSystemFont, 'SF Mono', Monaco, monospace;\n                font-weight: 500;\n            }\n            \n            /* Checkbox Input */\n            .checkbox-input {\n                width: 20px;\n                height: 20px;\n                accent-color: #007aff;\n                cursor: pointer;\n                border-radius: 4px;\n            }\n            \n            /* Responsive Design */\n            @media (max-width: 768px) {\n                .pattern-selector {\n                    gap: 6px;\n                }\n                \n                .pattern-button {\n                    padding: 10px 14px;\n                    font-size: 14px;\n                }\n                \n                .parameter-control {\n                    flex-direction: column;\n                    align-items: flex-start;\n                    gap: 8px;\n                    padding: 10px 0;\n                }\n                \n                .input-container {\n                    width: 100%;\n                    justify-content: space-between;\n                }\n                \n                .range-input {\n                    width: 150px;\n                }\n                \n                .control-label {\n                    font-size: 14px;\n                }\n            }\n        ",document.head.appendChild(t)}bindEvents(){}selectPattern(t){this.currentPattern=t;this.element.querySelectorAll(".pattern-button").forEach(e=>{e.classList.toggle("active",e.dataset.pattern===t)}),this.updateControlsVisibility(),this.app.updateParameter("patternType",t)}updateParameter(t,e){this.app.updateParameter(t,e)}updateControlsVisibility(){Object.entries(this.controls).forEach(([t,e])=>{const n=e.definition.patterns.includes(this.currentPattern);e.element.classList.toggle("hidden",!n)})}update(){const e=this.app.getParameter("patternType")||t;e!==this.currentPattern&&this.selectPattern(e),Object.entries(this.controls).forEach(([t,e])=>{const n=this.app.getParameter(t);void 0!==n&&("range"===e.input.type?(e.input.value=n,e.valueDisplay&&(e.valueDisplay.textContent=n)):"checkbox"===e.input.type&&(e.input.checked=n))})}getState(){return{currentPattern:this.currentPattern,parameters:Object.fromEntries(Object.entries(this.controls).map(([t,e])=>[t,"checkbox"===e.input.type?e.input.checked:parseFloat(e.input.value)]))}}getElement(){return this.element}destroy(){this.element?.remove()}}class b{constructor(t){this.app=t,this.element=null,this.colorInputs={},this.currentColors={...i.colors},this.initializeUI(),this.bindEvents()}initializeUI(){this.element=document.createElement("div"),this.element.className="theme-controls",this.createThemePresets(),this.createColorPickers(),this.applyStyles()}createThemePresets(){const t=document.createElement("div");t.className="theme-presets";const e=document.createElement("h4");e.textContent="Theme Presets",e.className="presets-label";const n=document.createElement("div");n.className="presets-grid";[{key:"dawn",label:"Dawn",emoji:"ðŸŒ…",colors:h.dawn},{key:"ocean",label:"Ocean",emoji:"ðŸŒŠ",colors:h.ocean},{key:"forest",label:"Forest",emoji:"ðŸŒ²",colors:h.forest},{key:"sunset",label:"Sunset",emoji:"ðŸŒ‡",colors:h.sunset},{key:"midnight",label:"Midnight",emoji:"ðŸŒ™",colors:h.midnight}].forEach(t=>{const e=document.createElement("button");e.className="preset-button",e.innerHTML=`\n                <span class="preset-emoji">${t.emoji}</span>\n                <span class="preset-label">${t.label}</span>\n            `,e.title=`Apply ${t.label} theme`,e.dataset.preset=t.key;const o=document.createElement("div");o.className="preset-preview",o.style.background=`linear-gradient(45deg, ${t.colors.color1}, ${t.colors.color2}, ${t.colors.color3}, ${t.colors.color4})`,e.appendChild(o),e.addEventListener("click",()=>{this.applyThemePreset(t.key)}),n.appendChild(e)}),t.appendChild(e),t.appendChild(n),this.element.appendChild(t)}createColorPickers(){const t=document.createElement("div");t.className="color-pickers";const e=document.createElement("h4");e.textContent="Custom Colors",e.className="pickers-label";const n=document.createElement("div");n.className="pickers-grid";[{key:"color1",label:"Primary",position:"top-left"},{key:"color2",label:"Secondary",position:"top-right"},{key:"color3",label:"Accent",position:"bottom-left"},{key:"color4",label:"Background",position:"bottom-right"}].forEach(t=>{const e=document.createElement("div");e.className="color-control";const o=document.createElement("label");o.className="color-label",o.textContent=t.label;const a=document.createElement("div");a.className="color-input-container";const i=document.createElement("input");i.type="color",i.className="color-input",i.value=this.currentColors[t.key],i.title=`Select ${t.label} color`;const r=document.createElement("span");r.className="color-value",r.textContent=this.currentColors[t.key],i.addEventListener("input",e=>{const n=e.target.value;r.textContent=n,this.updateColor(t.key,n)}),a.appendChild(i),a.appendChild(r),e.appendChild(o),e.appendChild(a),n.appendChild(e),this.colorInputs[t.key]={input:i,value:r,control:e}}),t.appendChild(e),t.appendChild(n),this.element.appendChild(t)}applyStyles(){const t=document.createElement("style");t.textContent="\n            .theme-controls {\n                color: #1d1d1f;\n            }\n            \n            .presets-label,\n            .pickers-label {\n                margin: 0 0 16px 0;\n                font-size: 17px;\n                font-weight: 600;\n                color: #1d1d1f;\n                text-transform: none;\n                letter-spacing: -0.2px;\n            }\n            \n            /* Theme Presets */\n            .theme-presets {\n                margin-bottom: 28px;\n            }\n            \n            .presets-grid {\n                display: grid;\n                grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));\n                gap: 8px;\n            }\n            \n            .preset-button {\n                position: relative;\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                padding: 12px 8px;\n                background: rgba(0, 0, 0, 0.03);\n                border: 1px solid rgba(0, 0, 0, 0.08);\n                border-radius: 8px;\n                color: #1d1d1f;\n                cursor: pointer;\n                transition: all 0.2s ease;\n                overflow: hidden;\n                backdrop-filter: blur(10px);\n                -webkit-backdrop-filter: blur(10px);\n            }\n            \n            .preset-button:hover {\n                background: rgba(0, 0, 0, 0.05);\n                border-color: rgba(0, 0, 0, 0.12);\n                transform: translateY(-1px);\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n            }\n            \n            .preset-button:active {\n                transform: translateY(0);\n            }\n            \n            .preset-emoji {\n                font-size: 18px;\n                margin-bottom: 4px;\n            }\n            \n            .preset-label {\n                font-size: 12px;\n                font-weight: 500;\n                text-align: center;\n                position: relative;\n                z-index: 1;\n            }\n            \n            .preset-preview {\n                position: absolute;\n                bottom: 0;\n                left: 0;\n                right: 0;\n                height: 3px;\n                opacity: 0.8;\n                transition: all 0.2s ease;\n            }\n            \n            .preset-button:hover .preset-preview {\n                opacity: 1;\n                height: 4px;\n            }\n            \n            /* Color Pickers */\n            .color-pickers {\n                margin-bottom: 20px;\n            }\n            \n            .pickers-grid {\n                display: grid;\n                grid-template-columns: 1fr 1fr;\n                gap: 16px;\n            }\n            \n            .color-control {\n                display: flex;\n                flex-direction: column;\n                gap: 8px;\n            }\n            \n            .color-label {\n                font-size: 13px;\n                font-weight: 500;\n                color: #1d1d1f;\n            }\n            \n            .color-input-container {\n                display: flex;\n                align-items: center;\n                gap: 8px;\n            }\n            \n            .color-input {\n                width: 44px;\n                height: 44px;\n                border: 1px solid rgba(0, 0, 0, 0.1);\n                border-radius: 8px;\n                cursor: pointer;\n                background: none;\n                transition: all 0.2s ease;\n                box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n            }\n            \n            .color-input:hover {\n                border-color: rgba(0, 0, 0, 0.2);\n                transform: scale(1.05);\n                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n            }\n            \n            .color-input::-webkit-color-swatch-wrapper {\n                padding: 4px;\n            }\n            \n            .color-input::-webkit-color-swatch {\n                border: none;\n                border-radius: 4px;\n            }\n            \n            .color-input::-moz-color-swatch {\n                border: none;\n                border-radius: 4px;\n            }\n            \n            .color-value {\n                font-size: 11px;\n                font-family: -apple-system, BlinkMacSystemFont, 'SF Mono', Monaco, monospace;\n                color: #86868b;\n                background: rgba(0, 0, 0, 0.03);\n                padding: 6px 8px;\n                border-radius: 6px;\n                flex: 1;\n                text-align: center;\n                text-transform: uppercase;\n                font-weight: 500;\n                border: 1px solid rgba(0, 0, 0, 0.05);\n            }\n            \n            /* Responsive Design */\n            @media (max-width: 768px) {\n                .presets-grid {\n                    grid-template-columns: repeat(3, 1fr);\n                    gap: 6px;\n                }\n                \n                .preset-button {\n                    padding: 10px 6px;\n                }\n                \n                .preset-emoji {\n                    font-size: 16px;\n                }\n                \n                .preset-label {\n                    font-size: 11px;\n                }\n                \n                .pickers-grid {\n                    grid-template-columns: 1fr;\n                    gap: 12px;\n                }\n                \n                .color-input-container {\n                    flex-direction: row;\n                    align-items: center;\n                }\n                \n                .color-input {\n                    width: 36px;\n                    height: 36px;\n                }\n                \n                .color-value {\n                    font-size: 10px;\n                }\n            }\n        ",document.head.appendChild(t)}bindEvents(){}applyThemePreset(t){const e=h[t];e&&(this.currentColors={...e},Object.entries(e).forEach(([t,e])=>{this.colorInputs[t]&&(this.colorInputs[t].input.value=e,this.colorInputs[t].value.textContent=e)}),this.app.updateParameter("colors",this.currentColors))}updateColor(t,e){this.currentColors[t]=e,this.app.updateParameter("colors",this.currentColors)}update(){const t=this.app.getParameter("colors");t&&(this.currentColors={...t},Object.entries(this.currentColors).forEach(([t,e])=>{this.colorInputs[t]&&(this.colorInputs[t].input.value=e,this.colorInputs[t].value.textContent=e)}))}getState(){return{currentColors:{...this.currentColors}}}getElement(){return this.element}destroy(){this.element?.remove()}}class x{constructor(t){this.app=t,this.isOpen=!1,this.panel=null,this.toggleButton=null,this.backdrop=null,this.patternControls=null,this.themeControls=null,this.initializeUI(),this.bindEvents()}initializeUI(){this.createToggleButton(),this.createBackdrop(),this.createMainPanel(),this.createSubComponents(),this.applyStyles()}createToggleButton(){this.toggleButton=document.createElement("div"),this.toggleButton.id="controlToggle",this.toggleButton.style.display="none"}createBackdrop(){this.backdrop=document.createElement("div"),this.backdrop.id="controlBackdrop",this.backdrop.style.display="none"}createMainPanel(){this.panel=document.createElement("div"),this.panel.id="controlPanel",this.panel.setAttribute("role","complementary"),this.panel.setAttribute("aria-label","Pattern Controls");const t=document.createElement("div");t.className="control-header";const e=document.createElement("h1");e.textContent="Controls",e.className="control-title",t.appendChild(e);const n=document.createElement("div");n.className="control-content",n.id="controlContent",this.panel.appendChild(t),this.panel.appendChild(n),document.body.appendChild(this.panel)}createSubComponents(){const t=document.getElementById("controlContent"),e=document.createElement("div");e.className="control-section";const n=document.createElement("h3");n.textContent="Pattern Type",n.className="section-header",e.appendChild(n),this.patternControls=new u(this.app),e.appendChild(this.patternControls.getElement());const o=document.createElement("div");o.className="control-section";const a=document.createElement("h3");a.textContent="Color Theme",a.className="section-header",o.appendChild(a),this.themeControls=new b(this.app),o.appendChild(this.themeControls.getElement()),t.appendChild(e),t.appendChild(o)}applyStyles(){const t=document.createElement("style");t.textContent="\n            /* Global Layout */\n            body {\n                margin: 0;\n                padding: 0;\n                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;\n                background: #f5f5f7;\n                display: flex;\n                height: 100vh;\n                overflow: hidden;\n            }\n            \n            /* Canvas Container */\n            #artCanvas {\n                flex: 1;\n                border: none;\n                background: white;\n                border-radius: 12px;\n                margin: 16px;\n                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);\n                display: block !important;\n            }\n            \n            /* Side Panel */\n            #controlPanel {\n                width: 320px;\n                height: 100vh;\n                background: rgba(255, 255, 255, 0.8);\n                backdrop-filter: blur(40px);\n                -webkit-backdrop-filter: blur(40px);\n                border-left: 1px solid rgba(255, 255, 255, 0.2);\n                overflow-y: auto;\n                overflow-x: hidden;\n                display: flex;\n                flex-direction: column;\n                position: relative;\n                z-index: 1000;\n            }\n            \n            /* Header */\n            .control-header {\n                padding: 32px 24px 24px 24px;\n                border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n                background: rgba(255, 255, 255, 0.1);\n                backdrop-filter: blur(40px);\n                -webkit-backdrop-filter: blur(40px);\n                position: sticky;\n                top: 0;\n                z-index: 10;\n            }\n            \n            .control-title {\n                margin: 0;\n                color: #1d1d1f;\n                font-size: 28px;\n                font-weight: 600;\n                letter-spacing: -0.5px;\n            }\n            \n            /* Content */\n            .control-content {\n                padding: 0 24px 24px 24px;\n                flex: 1;\n            }\n            \n            .control-section {\n                margin-bottom: 32px;\n                padding: 0;\n                background: none;\n                border-radius: 0;\n                backdrop-filter: none;\n            }\n            \n            .section-header {\n                margin: 0 0 16px 0;\n                color: #1d1d1f;\n                font-size: 20px;\n                font-weight: 600;\n                text-transform: none;\n                letter-spacing: -0.3px;\n            }\n            \n            /* Scrollbar styling */\n            #controlPanel::-webkit-scrollbar {\n                width: 6px;\n            }\n            \n            #controlPanel::-webkit-scrollbar-track {\n                background: transparent;\n            }\n            \n            #controlPanel::-webkit-scrollbar-thumb {\n                background: rgba(0, 0, 0, 0.2);\n                border-radius: 3px;\n            }\n            \n            #controlPanel::-webkit-scrollbar-thumb:hover {\n                background: rgba(0, 0, 0, 0.3);\n            }\n            \n            /* Responsive Design */\n            @media (max-width: 768px) {\n                body {\n                    flex-direction: column;\n                }\n                \n                #controlPanel {\n                    width: 100%;\n                    height: auto;\n                    max-height: 50vh;\n                    border-left: none;\n                    border-top: 1px solid rgba(255, 255, 255, 0.2);\n                    order: 2;\n                }\n                \n                #artCanvas {\n                    margin: 8px;\n                    border-radius: 8px;\n                    order: 1;\n                }\n                \n                .control-header {\n                    padding: 16px 20px 12px 20px;\n                }\n                \n                .control-title {\n                    font-size: 24px;\n                }\n                \n                .control-content {\n                    padding: 0 20px 20px 20px;\n                }\n                \n                .control-section {\n                    margin-bottom: 24px;\n                }\n                \n                .section-header {\n                    font-size: 18px;\n                }\n            }\n        ",document.head.appendChild(t)}bindEvents(){this.isOpen=!0}toggle(){}open(){}close(){}updateControls(){this.patternControls&&this.patternControls.update(),this.themeControls&&this.themeControls.update()}getState(){return{isOpen:this.isOpen,patternControls:this.patternControls?.getState(),themeControls:this.themeControls?.getState()}}destroy(){this.toggleButton?.removeEventListener("click",this.toggle),this.backdrop?.removeEventListener("click",this.close),this.toggleButton?.remove(),this.backdrop?.remove(),this.panel?.remove(),this.patternControls?.destroy(),this.themeControls?.destroy()}}class y{constructor(){this.name="Gentle",this.type="gentle"}render(t,e,n,o,a,i={}){const{wavelength:r=25,lineDensity:s=35}=i;t.fillStyle=`rgb(${a.background[0]}, ${a.background[1]}, ${a.background[2]})`,t.fillRect(0,0,n,o);const l=Math.max(4,Math.ceil(n/300)),c=Math.min(s,Math.ceil(o/20));for(let d=0;d<c;d++){const i=d/c*o,s=(35+20*Math.sin(.2*e+.1*d))*(r/25),h=(.008+.004*Math.sin(.1*e+.05*d))*(25/r),p=e*(.5+.3*Math.sin(.1*d)),m=1.5+1*Math.sin(e+.2*d),g=.4+.3*Math.abs(Math.sin(.3*e+.15*d));t.beginPath(),t.lineWidth=m,t.strokeStyle=`rgba(${a.primary[0]}, ${a.primary[1]}, ${a.primary[2]}, ${g})`;let u=!0;for(let e=0;e<n;e+=l){const n=i+s*Math.sin(e*h+p);u?(t.moveTo(e,n),u=!1):t.lineTo(e,n)}t.stroke()}const h=Math.min(s,Math.ceil(n/25));for(let d=0;d<h;d++){const i=d/h*n,s=(30+15*Math.sin(.15*e+.12*d))*(r/25),c=(.009+.004*Math.cos(.12*e+.07*d))*(25/r),p=e*(.4+.25*Math.cos(.15*d)),m=1.2+.8*Math.sin(e+.3*d),g=.3+.2*Math.abs(Math.sin(.25*e+.18*d));t.beginPath(),t.lineWidth=m,t.strokeStyle=`rgba(${a.secondary[0]}, ${a.secondary[1]}, ${a.secondary[2]}, ${g})`;let u=!0;for(let e=0;e<o;e+=l){const n=i+s*Math.sin(e*c+p);u?(t.moveTo(n,e),u=!1):t.lineTo(n,e)}t.stroke()}const p=Math.min(Math.ceil(s/2),Math.ceil(n/80));for(let d=0;d<p;d++){const i=d/p*n*1.5-.25*n,s=(20+10*Math.cos(.25*e+.1*d))*(r/25),c=(Math.sin(.15*e+.08*d),e*(.3+.2*Math.sin(.1*d))),h=1+.5*Math.sin(e+.25*d),m=.2+.15*Math.abs(Math.sin(.2*e+.1*d));t.beginPath(),t.lineWidth=h,t.strokeStyle=`rgba(${a.accent[0]}, ${a.accent[1]}, ${a.accent[2]}, ${m})`;const g=Math.ceil(o/l);let u=!0;for(let e=0;e<=g;e++){const a=e/g,r=i+a*n,l=a*o+s*Math.sin(8*a+c);r>=0&&r<=n&&l>=0&&l<=o&&(u?(t.moveTo(r,l),u=!1):t.lineTo(r,l))}t.stroke()}}}class C{constructor(){this.name="Mandala",this.type="mandala"}render(t,e,n,o,a,i={}){const{mandalaComplexity:r=6,mandalaSpeed:s=1}=i;t.fillStyle=`rgb(${a.background[0]}, ${a.background[1]}, ${a.background[2]})`,t.fillRect(0,0,n,o);const l=e*s,c=n/2,h=o/2,p=Math.min(n,o)/8,d=(Math.sin(.025*l)+1)/2,m=3+3*d;t.beginPath(),t.arc(c,h,m,0,2*Math.PI),t.fillStyle=`rgba(${a.primary[0]}, ${a.primary[1]}, ${a.primary[2]}, ${.8+.2*d})`,t.fill();for(let u=0;u<r;u++){const e=p*(1+.7*u),n=6+2*u;for(let o=0;o<n;o++){const i=o/n*Math.PI*2,r=.3*Math.sin(.025*l+.5*u+.2*o),s=c+Math.cos(i)*(e+r*e),p=h+Math.sin(i)*(e+r*e),d=(Math.sin(.015*l+.4*u+.8*o)+1)/2,m=.3+.6*d,g=2+d*(4+u);if(t.beginPath(),u%3==0?(t.arc(s,p,g,0,2*Math.PI),t.fillStyle=`rgba(${a.primary[0]}, ${a.primary[1]}, ${a.primary[2]}, ${m})`,t.fill()):u%3==1?(t.rect(s-g,p-g,2*g,2*g),t.fillStyle=`rgba(${a.secondary[0]}, ${a.secondary[1]}, ${a.secondary[2]}, ${m})`,t.fill()):(t.moveTo(s,p-g),t.lineTo(s+g,p),t.lineTo(s,p+g),t.lineTo(s-g,p),t.closePath(),t.fillStyle=`rgba(${a.accent[0]}, ${a.accent[1]}, ${a.accent[2]}, ${m})`,t.fill()),u>0&&o%2==0){const n=.6*e,r=c+Math.cos(i+.3)*n,s=h+Math.sin(i+.3)*n,p=(Math.sin(.02*l+.3*u+o)+1)/2,d=.2+.4*p,m=1+2*p;t.beginPath(),t.arc(r,s,m,0,2*Math.PI),t.fillStyle=`rgba(${a.secondary[0]}, ${a.secondary[1]}, ${a.secondary[2]}, ${d})`,t.fill()}}}const g=Math.floor(8*r);for(let u=0;u<g;u++){const e=u/g*Math.PI*2,n=.5*p,o=p*(2+.5*r),i=c+Math.cos(e)*n,s=h+Math.sin(e)*n,d=c+Math.cos(e)*o,m=h+Math.sin(e)*o,b=(Math.sin(.01*l+.2*u)+1)/2,x=.1+.2*b;t.beginPath(),t.moveTo(i,s),t.lineTo(d,m),t.strokeStyle=`rgba(${a.primary[0]}, ${a.primary[1]}, ${a.primary[2]}, ${x})`,t.lineWidth=1+b,t.stroke()}for(let u=1;u<=3;u++){const e=p*(.3+.4*u),n=8*u;for(let o=0;o<n;o++){const i=o/n*Math.PI*2,r=Math.sin(.03*l+.8*u+.1*o)*(.1*e),s=c+Math.cos(i)*(e+r),p=h+Math.sin(i)*(e+r),d=(Math.sin(.025*l+.5*u+.3*o)+1)/2,m=.2+.5*d,g=1+2*d;t.beginPath(),t.arc(s,p,g,0,2*Math.PI),t.fillStyle=`rgba(${a.accent[0]}, ${a.accent[1]}, ${a.accent[2]}, ${m})`,t.fill()}}}}class f{constructor(t,e,n,o){this.x=0,this.y=0,this.points=[],this.age=0,this.lifespan=0,this.opacity=0,this.width=0,this.baseColor={r:0,g:0,b:0},this.reset(t,e,n,o)}reset(t,e,n,o){const a=Math.random()*Math.PI*2,i=50+150*Math.random();this.x=t/2+Math.cos(a)*i,this.y=e/2+Math.sin(a)*i,this.points=[],this.age=0,this.lifespan=400+600*Math.random(),this.opacity=0,this.width=.2+.8*Math.random();const r=(Math.floor(this.x/o)+Math.floor(this.y/o))/20;this.baseColor={r:Math.round(n.primary[0]+(n.secondary[0]-n.primary[0])*r),g:Math.round(n.primary[1]+(n.secondary[1]-n.primary[1])*r),b:Math.round(n.primary[2]+(n.secondary[2]-n.primary[2])*r)}}update(t,e,n,o,a,i){if(this.age+=1,this.age>=this.lifespan)return void this.reset(n,o,a,i);const r=this.age/this.lifespan;this.opacity=r<.1?r/.1*l:r>.9?(1-(r-.9)/.1)*l:l;const c=e(this.x,this.y,t);this.points.push({x:this.x,y:this.y}),this.points.length>s&&this.points.shift(),this.x+=.5*c.x,this.y+=.5*c.y;const h=Math.sqrt(c.x*c.x+c.y*c.y);(this.x<0||this.x>n||this.y<0||this.y>o||h<.01)&&this.reset(n,o,a,i)}draw(t){if(!(this.points.length<2)){t.beginPath(),t.strokeStyle=`rgba(${this.baseColor.r}, ${this.baseColor.g}, ${this.baseColor.b}, ${this.opacity})`,t.lineWidth=this.width*c,t.moveTo(this.points[0].x,this.points[0].y);for(let e=1;e<this.points.length;e++)t.lineTo(this.points[e].x,this.points[e].y);t.stroke()}}}class k{constructor(){this.name="Vector Field",this.type="vectorfield",this.lines=[],this.initialized=!1}noise(t,e,n){return.5*Math.sin(7*t+3*n)+.5*Math.sin(8*e+4*n)}getTileOffset(t,e,n,o,a){const i=Math.floor(t/o),r=Math.floor(e/o);return{offsetX:a*Math.sin(.01*n+.5*i+.3*r),offsetY:a*Math.cos(.01*n+.5*r+.3*i)}}initializeLines(t,e,n,o){if(!this.initialized){this.lines=[];for(let a=0;a<r;a++)this.lines.push(new f(t,e,n,o));this.initialized=!0}}render(t,e,n,o,a,i={}){const{tileSize:r=55,tileShiftAmplitude:s=10}=i;t.fillStyle=`rgb(${a.background[0]}, ${a.background[1]}, ${a.background[2]})`,t.fillRect(0,0,n,o),this.initializeLines(n,o,a,r);const l=(t,e,a)=>{const{offsetX:i,offsetY:l}=this.getTileOffset(t,e,a,r,s),c=t+i,h=e+l,p=.01*(c-n/2),d=.01*(h-o/2),m=this.noise(p,d,125e-6*a),g=c-n/2,u=h-o/2,b=Math.sqrt(g*g+u*u),x=Math.max(0,1-b/200),y=m*Math.PI*4+Math.atan2(u,g);return{x:Math.cos(y)*x,y:Math.sin(y)*x}};this.lines.forEach(i=>{i.update(e,l,n,o,a,r),i.draw(t)})}}class L{constructor(){this.name="Shell Ridge",this.type="shellridge"}render(t,e,n,o,a,i={}){const{shellRidgeRings:r=25,shellRidgeDistortion:s=8}=i;t.fillStyle=`rgb(${a.background[0]}, ${a.background[1]}, ${a.background[2]})`,t.fillRect(0,0,n,o);const l=n/2,c=o/2,h=100*e;for(let p=0;p<r;p++){const e=10+p*Math.min(n,o)/(2*r);t.beginPath();for(let n=0;n<=2*Math.PI;n+=.05){const o=e+(Math.sin(8*n+.75*h+.5*p)*s+Math.sin(12*n-1*h+.3*p)*(.625*s)),a=l+Math.cos(n)*o,i=c+Math.sin(n)*o;0===n?t.moveTo(a,i):t.lineTo(a,i)}t.closePath(),t.lineWidth=1.5+.5*Math.sin(.5*p+.01*h);const i=.6-.02*p;t.strokeStyle=`rgba(${a.primary[0]}, ${a.primary[1]}, ${a.primary[2]}, ${Math.max(.1,i)})`,t.stroke();for(let n=0;n<60;n++){const o=n/60*Math.PI*2,i=e+5*Math.sin(8*o+1.5*h*.01),r=l+Math.cos(o)*i,s=c+Math.sin(o)*i;t.beginPath(),t.arc(r,s,.5,0,2*Math.PI);const d=.2-.01*p;t.fillStyle=`rgba(${a.accent[0]}, ${a.accent[1]}, ${a.accent[2]}, ${Math.max(.05,d)})`,t.fill()}}}}class M{constructor(r={}){this.config={canvas:{targetFPS:60,...r.canvas},debug:!0,...r},this.initialized=!1,this.canvas=null,this.ctx=null,this.frameCount=0,this.startTime=Date.now(),this.logoPath2D=null,this.backgroundPath2D=null,this.controlPanel=null,this.patternType=t,this.wavelength=i.wavelength,this.speed=i.speed,this.threshold=i.threshold,this.gradientMode=i.gradientMode,this.sourceCount=i.sourceCount,this.lineDensity=i.lineDensity,this.mandalaComplexity=i.mandalaComplexity,this.mandalaSpeed=i.mandalaSpeed,this.tileSize=i.tileSize,this.tileShiftAmplitude=i.tileShiftAmplitude,this.shellRidgeRings=i.shellRidgeRings,this.shellRidgeDistortion=i.shellRidgeDistortion,this.colors={primary:this.hexToRgb(i.colors.color1),secondary:this.hexToRgb(i.colors.color2),accent:this.hexToRgb(i.colors.color3),background:this.hexToRgb(i.colors.color4)},this.patterns={[e]:new y,[n]:new C,[o]:new k,[a]:new L}}async initialize(){try{if(this.canvas=document.getElementById("artCanvas"),!this.canvas)throw new Error('Canvas element with id "artCanvas" not found');if(this.resizeCanvas(),this.ctx=this.canvas.getContext("2d"),!this.ctx)throw new Error("Failed to get 2D context");this.createLogoPath(),this.initialized=!0,this.canvas.style.display="block",this.initializeControls(),this.startAnimation()}catch(t){throw t}}createLogoPath(){try{this.logoPath2D=new Path2D(g),this.backgroundPath2D=new Path2D(m)}catch(t){this.logoPath2D=new Path2D,this.backgroundPath2D=new Path2D;const e=p/2,n=d/2;this.logoPath2D.rect(-e,-n,p,d),this.backgroundPath2D.rect(-e-10,-n-10,p+20,d+20)}}initializeControls(){this.controlPanel=new x(this)}updateParameter(t,e){"colors"!==t?this.hasOwnProperty(t)&&(this[t]=e):this.colors={primary:this.hexToRgb(e.color1),secondary:this.hexToRgb(e.color2),accent:this.hexToRgb(e.color3),background:this.hexToRgb(e.color4)}}getParameter(t){return"colors"===t?{color1:this.rgbToHex(this.colors.primary),color2:this.rgbToHex(this.colors.secondary),color3:this.rgbToHex(this.colors.accent),color4:this.rgbToHex(this.colors.background)}:this.hasOwnProperty(t)?this[t]:void 0}hexToRgb(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]}rgbToHex(t){return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+t[2]).toString(16).slice(1)}resizeCanvas(){const t=window.innerWidth,e=window.innerHeight,n=Math.min(.9*t,1200),o=Math.min(.8*e,800);this.canvas.width=n,this.canvas.height=o}startAnimation(){const t=()=>{this.initialized&&(this.draw(),requestAnimationFrame(t))};requestAnimationFrame(t)}draw(){if(!this.initialized||!this.ctx)return;this.frameCount++;const t=(Date.now()-this.startTime)/1e3;this.frameCount,this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);const e=document.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height;const n=e.getContext("2d");this.renderPattern(n,t,this.canvas.width,this.canvas.height),this.applySVGMask(e),this.drawLogoBackground(),this.ctx.drawImage(e,0,0),this.drawFrameInfo(t)}renderPattern(e,n,o,a){const i=this.getPatternOptions();this.patternType===t?this.renderInterferencePattern(e,n):this.patterns[this.patternType]?this.patterns[this.patternType].render(e,n,o,a,this.colors,i):this.renderInterferencePattern(e,n)}getPatternOptions(){return{wavelength:this.wavelength,speed:this.speed,threshold:this.threshold,gradientMode:this.gradientMode,sourceCount:this.sourceCount,lineDensity:this.lineDensity,mandalaComplexity:this.mandalaComplexity,mandalaSpeed:this.mandalaSpeed,tileSize:this.tileSize,tileShiftAmplitude:this.tileShiftAmplitude,shellRidgeRings:this.shellRidgeRings,shellRidgeDistortion:this.shellRidgeDistortion}}renderInterferencePattern(t,e){const n=t.canvas.width,o=t.canvas.height,a=t.createImageData(n,o),i=a.data,r=this.colors.primary,s=this.colors.secondary,l=[];for(let c=0;c<this.sourceCount;c++){const t=c/this.sourceCount*Math.PI*2,e=.3*Math.min(n,o),a=.5*n+Math.cos(t)*e,i=.5*o+Math.sin(t)*e;l.push({x:a,y:i})}this.wavelength;for(let c=0;c<o;c++)for(let t=0;t<n;t++){const o=4*(c*n+t);let a=0;for(const n of l){const o=t-n.x,i=c-n.y,r=Math.sqrt(o*o+i*i);a+=1*Math.sin(.02*r+e*this.speed*100)}const h=(a+l.length)/(2*l.length),p=Math.round(r[0]*h+s[0]*(1-h)),d=Math.round(r[1]*h+s[1]*(1-h)),m=Math.round(r[2]*h+s[2]*(1-h));i[o]=p,i[o+1]=d,i[o+2]=m,i[o+3]=255}t.putImageData(a,0,0)}drawLogoBackground(){this.ctx.fillStyle="#000000";const t=this.canvas.width,e=this.canvas.height,n=.7*Math.min(t/p,e/d);this.ctx.save(),this.ctx.translate(t/2,e/2),this.ctx.scale(n,n),this.ctx.translate(-p/2,-d/2),this.ctx.fill(this.backgroundPath2D),this.ctx.restore()}applySVGMask(t){const e=t.getContext("2d"),n=t.width,o=t.height,a=document.createElement("canvas");a.width=n,a.height=o;const i=a.getContext("2d");i.fillStyle="#ffffff";const r=.7*Math.min(n/p,o/d);i.save(),i.translate(n/2,o/2),i.scale(r,r),i.translate(-p/2,-d/2),i.fill(this.logoPath2D),i.restore(),e.globalCompositeOperation="destination-in",e.drawImage(a,0,0),e.globalCompositeOperation="source-over"}drawFrameInfo(t){this.ctx.fillStyle="rgba(0, 0, 0, 0.8)",this.ctx.font="16px Arial",this.ctx.textAlign="left",this.ctx.fillText(`Frame: ${this.frameCount} | Time: ${t.toFixed(1)}s | Theme: Ocean`,10,25)}windowResized(){this.canvas&&this.resizeCanvas()}}let v=null,w=!1;const P={canvas:{targetFPS:60},webgpu:{enabled:!0,fallbackTo2D:!0},debug:!0};document.addEventListener("DOMContentLoaded",async()=>{try{await void 0,w=await async function(){if(!navigator.gpu)return!1;try{return null!==await navigator.gpu.requestAdapter()}catch(t){return!1}}();const t=document.getElementById("loading");t&&(t.style.display="none"),v=new M(P),await v.initialize(),await void 0}catch(t){await void 0;const e=document.getElementById("loading");e&&(e.style.display="none"),function(t){const e=document.getElementById("error");e&&(e.style.display="block",e.textContent=t)}("Application setup failed: "+t.message)}}),window.addEventListener("resize",()=>{v?.windowResized()}),window.onerror=function(t,e,n,o,a){return!1},"undefined"!=typeof module&&module.exports&&(module.exports={CONFIG:P})}();
//# sourceMappingURL=main.49ff3dc33ee7fdbf3e4b.js.map